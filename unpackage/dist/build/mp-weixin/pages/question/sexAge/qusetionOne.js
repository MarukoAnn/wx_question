(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/question/sexAge/qusetionOne"],{"100e":function(t,e,o){"use strict";var s;o.d(e,"b",(function(){return a})),o.d(e,"c",(function(){return i})),o.d(e,"a",(function(){return s}));var a=function(){var t=this,e=t.$createElement;t._self._c},i=[]},"42e3":function(t,e,o){"use strict";(function(t){o("555d");s(o("66fd"));var e=s(o("d6f5"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},"4a14":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(o("fe2a"));function a(t){return t&&t.__esModule?t:{default:t}}var i={data:function(){return{total:null,num:9.6,qestion:"",nowNum:1,nextlabel:"下一题",flag:0,questionjson:"",flagfocus:0,showItem:"",passflag:!1,scrollTop:0,old:{scrollTop:0},isdisStatus:[],title:"",isdisease:0,answer:[],max:0,secondMax:0,thirdMax:0,SumActualTotal:{ph_value:0,qx_value:0,yx_value:0,ya_value:0,ts_value:0,sr_value:0,qy_value:0,tb_value:0,yr_value:0,xk_value:0},SumTotal:[],SumTotalTree:[{label:"ph_value",value:56,name:"平和质"},{label:"qx_value",value:67,name:"气虚质"},{label:"yx_value",value:52,name:"阴虚质"},{label:"ya_value",value:48,name:"阳虚质"},{label:"ts_value",value:51,name:"痰湿质"},{label:"sr_value",value:55,name:"湿热质"},{label:"qy_value",value:23,name:"气郁质"},{label:"tb_value",value:30,name:"特禀质"},{label:"yr_value",value:58,name:"阳热质"},{label:"xk_value",value:23,name:"血亏质"}],SumTotalSex:[{label:"ph_value",value:56,name:"平和质"},{label:"qx_value",value:67,name:"气虚质"},{label:"yx_value",value:52,name:"阴虚质"},{label:"ya_value",value:48,name:"阳虚质"},{label:"ts_value",value:54,name:"痰湿质"},{label:"sr_value",value:55,name:"湿热质"},{label:"qy_value",value:23,name:"气郁质"},{label:"tb_value",value:30,name:"特禀质"},{label:"yr_value",value:58,name:"阳热质"},{label:"xk_value",value:30,name:"血亏质"}],physique_type:[],physique_type_enable:[],physique_result_list:[],physique_answer_list:[],a:!0,user_info:{openid:"",nikename:"",sex:"",tel:""}}},created:function(){"3"===t.getStorageSync("age")?(this.title="3~6岁儿童中医体质调查表",this.questionjson=o("cb83"),this.SumTotal=this.SumTotalTree):(this.title="6~14岁儿童中医体质调查表",this.questionjson=o("4395"),this.SumTotal=this.SumTotalSex),this.qestion=this.questionjson.question[this.flag],this.total=this.questionjson.question.length,wx.cloud.init({env:"prod-3pc76",traceUser:!0}),this.islogin()},methods:{selectItemData:function(t){1!==t.status?("false"===this.qestion.more&&this.qestion.select.forEach((function(t){t.color.fontColor="#000",t.color.iconBgc="#000",t.color.itemBgc="#F7F7F7",t.status=0})),t.status=1,t.color.fontColor="#fff",t.color.iconBgc="#fff",t.color.itemBgc="#8ECDFF"):(t.status=0,t.color.fontColor="#000",t.color.iconBgc="#000",t.color.itemBgc="#F7F7F7")},scroll:function(t){this.old.scrollTop=t.detail.scrollTop},setScroll:function(t){this.scrollTop=this.old.scrollTop,this.$nextTick((function(){this.scrollTop=0}))},rebuileComponents:function(){var t=this;this.a=!1,this.$nextTick((function(){t.a=!0}))},nextQuestion:function(e){this.setNextStyle(),""===t.getStorageSync("isCanUse")&&this.wxGetUserInfo()},backQuestion:function(e){0!==this.flag?(this.rebuileComponents(),"提交"===this.nextlabel&&(this.nextlabel="下一题"),this.nowNum=this.nowNum-1,this.flag-=1,this.num=100/this.total*this.nowNum,this.qestion=this.questionjson.question[this.flag]):t.navigateBack()},setQuestionFormat:function(t){var e=this,o=function(o){if(Number(e.SumActualTotal[o])===Number(t)){var s=e.SumTotal.filter((function(t){return t.label===o})),a=[];if(!e.physique_type.some((function(t){return t[0]===s[0].name})))return a.push(s[0].name),a.push(e.SumActualTotal[o]),{v:a}}};for(var s in this.SumActualTotal){var a=o(s);if("object"===typeof a)return a.v}},setNextStyle:function(){var e=this;if("false"===this.qestion.isImage?this.passflag=this.qestion.select.some((function(t){return 1===t.status})):this.passflag=this.qestion.select.every((function(t){return 0!==t.status})),this.flagfocus=0,this.passflag)if("提交"!==this.nextlabel)this.rebuileComponents(),this.setNextQuestionData();else{this.physique_answer_list=[],this.setfitnessSum();var o=function(t){var o=e.SumTotal.filter((function(e){return e.label===t}));e.SumActualTotal[t]=Math.ceil(e.SumActualTotal[t]/(4*o[0].value)*100)};for(var a in this.SumActualTotal)o(a);var i=[];for(var n in this.SumActualTotal)i.push(this.SumActualTotal[n]);var u=function(t){var o=[];e.SumTotalTree.forEach((function(s){s.label===t&&(o.push(s.name),o.push(e.SumActualTotal[t]))})),e.physique_result_list.push(o)};for(var l in this.SumActualTotal)u(l);var c=JSON.parse(t.getStorageSync("user_info")),r=JSON.parse(t.getStorageSync("child"));r.signature=t.getStorageSync("imgBase"),c.tel=r.ptel,0!==t.getStorageSync("isdisease")||JSON.parse(t.getStorageSync("isdisStatus")).includes("是")?r.is_diet=1:r.is_diet=0,t.showLoading({title:"加载中"});var f=this;t.request({url:s.default.env+"/Home/Report/addReport",data:{user_info:c,answer:{physique_type:this.physique_type,physique_answer_list:this.physique_answer_list,physique_result_list:this.physique_result_list,physique_asthma:"0"===t.getStorageSync("isdisease")?0:1,physique_asthma_list:"0"===t.getStorageSync("isdisease")?[]:t.getStorageSync("isdisease").splice(1,2)},child:r},method:"POST",header:{"custom-header":"application/json"},success:function(e){t.hideLoading(),"1000"===e.data.status?(t.setStorageSync("child_id",e.data.data.child_id),t.redirectTo({url:"../../score/physicalScore?value=5"}),f.max=f.thirdMax=f.secondMax=0,t.setStorageSync("results",JSON.stringify(e.data.data.physique_type)),t.showToast({title:e.data.msg,duration:2e3})):t.showToast({title:e.data.msg,duration:2e3,icon:"none"})},fail:function(e){t.showToast({title:"请求失败，请检查网络",duration:2e3,icon:"none"})}})}else t.showToast({title:"您有选项未选择",icon:"none",duration:2e3}),this.qestion.select.forEach((function(t){0===t.status&&("false"===e.qestion.isImage?(t.color.fontColor="#fff",t.color.iconBgc="#fff",t.color.itemBgc="#FFA2A2",0===e.flagfocus&&(e.showItem=t.focus,e.flagfocus=1)):(t.error="true",t.color.itemBgc="#FFA2A2",t.color.itemImageBgc="#FFEEEE",0===e.flagfocus&&(e.showItem=t.focus,e.flagfocus=1)))}))},setNextQuestionData:function(){this.flag+=1,this.nowNum=this.nowNum+1,this.nowNum<this.total?this.num=100/this.total*this.nowNum:(this.num=100,this.nextlabel="提交"),this.qestion=this.questionjson.question[this.flag]},selcetChcek:function(t,e){t.color.questionImageSelect.forEach((function(t){t.color.ftcolor="#B3ABAB",t.color.t_iconBgc="#707070",t.color.t_borBgc="#D8D8D8",t.color.bgc="#FCFCFC",t.color.t_innericonBgc="#FFFFFF",t.status=0,t.color.status=0})),t.status=1,t.error="false",t.color.fontColor="#fff",t.color.i_iconBgc="#fff",t.color.itemBgc="#8ECDFF",t.color.itemImageBgc="#E8F5FF",e.color.ftcolor="#FFFFFF",e.color.t_iconBgc="#FFFFFF",e.color.t_borBgc="#5CB7FF",e.color.bgc="#5CB7FF",e.color.t_innericonBgc="#5CB7FF",e.color.status=1},setfitnessSum:function(){var e=this;if(this.isdisStatus=[],this.questionjson.question[0].select.forEach((function(t){1==t.status&&("A"===t.focus?e.isdisStatus.push("是"):e.isdisStatus.push("否"))})),this.questionjson.question[1].select.forEach((function(t){1==t.status&&("A"===t.focus?e.isdisStatus.push("是"):e.isdisStatus.push("否"))})),"3"===t.getStorageSync("age")){var o=[],s=[8,9,10,11];s.forEach((function(t){e.questionjson.question[15].select[t].color.questionImageSelect.forEach((function(t){1===t.color.status&&o.push(t.label)}))})),t.setStorageSync("isShowFood",JSON.stringify(o))}else{var a=[],i=[14,15,16,17];i.forEach((function(t){e.questionjson.question[17].select[t].color.questionImageSelect.forEach((function(t){1===t.color.status&&a.push(t.label)}))})),t.setStorageSync("isShowFood",JSON.stringify(a))}t.setStorageSync("isdisStatus",JSON.stringify(this.isdisStatus)),this.questionjson.question.forEach((function(t){if("false"===t.isImage){var o=[];t.select.forEach((function(t,s){if(1===t.status)for(var a in o.push(t.focus),e.SumActualTotal)e.SumActualTotal[a]+=t.value[a]*t.data})),e.physique_answer_list.push(o)}else{var s=[];t.select.forEach((function(t){e.answer.push(t.focus),t.color.questionImageSelect.forEach((function(o){if(1===o.color.status){for(var a in e.answer.push(o.label),e.SumActualTotal)e.SumActualTotal[a]+=t.value[a]*o.color.value;s.push(o.label)}}))})),s.push("flag"),e.physique_answer_list.push(s)}}))},wxGetUserInfo:function(){this.user_info.openid=t.getStorageSync("openid");var e=this;t.getUserInfo({provider:"weixin",success:function(o){e.user_info.nikename=o.userInfo.nickName,e.user_info.sex=o.userInfo.gender,t.setStorageSync("user_info",JSON.stringify(e.user_info)),t.setStorageSync("isCanUse",!1),t.showLoading({title:"加载中"}),e.city=t.getStorageSync("city"),e.getOpenArea(e.user_info.openid)},fail:function(e){console.log(e),t.showToast({title:"网络错误或者拒接授权。",duration:2e3,icon:"none"})}})},islogin:function(){var e=this;t.login({provider:"weixin",success:function(t){console.log(t);t.code;e.getOpenid()}})},getOpenid:function(){wx.cloud.callFunction({name:"getopenid",complete:function(e){t.setStorageSync("openid",e.result.openid)}})},getOpenArea:function(e){var o=this;t.request({url:s.default.env+"/Home/Report/authReport",data:{openid:e,city_name:t.getStorageSync("city")},method:"POST",header:{"custom-header":"application/json"},success:function(e){t.hideLoading(),"1000"===e.data.status?(o.isAuthorize=!1,t.showToast({title:"登录成功,该地区以开放问卷调查。可以进行问卷填写",duration:2e3,icon:"none"}),t.removeStorageSync("area")):(t.showToast({title:e.data.msg,duration:2e3,icon:"none"}),t.redirectTo({url:"../../index/no_questionnaire"}),t.setStorageSync("area","未开放"))},fail:function(e){t.showToast({title:"请求失败，请检查网络",duration:2e3,icon:"none"})}})}}};e.default=i}).call(this,o("543d")["default"])},"6c9e":function(t,e,o){"use strict";o.r(e);var s=o("4a14"),a=o.n(s);for(var i in s)"default"!==i&&function(t){o.d(e,t,(function(){return s[t]}))}(i);e["default"]=a.a},9545:function(t,e,o){},d0c6:function(t,e,o){"use strict";var s=o("9545"),a=o.n(s);a.a},d6f5:function(t,e,o){"use strict";o.r(e);var s=o("100e"),a=o("6c9e");for(var i in a)"default"!==i&&function(t){o.d(e,t,(function(){return a[t]}))}(i);o("d0c6");var n,u=o("f0c5"),l=Object(u["a"])(a["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],n);e["default"]=l.exports}},[["42e3","common/runtime","common/vendor"]]]);